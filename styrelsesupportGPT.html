<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HSB S칬dert칬rn Chatt</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    #chatbox {
      width: 100%;
      max-width: 400px;
      height: 600px;
      border: 2px solid #00558c;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
      margin: 20px auto;
    }
    #messages {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      background: #f5f5f5;
    }
    .message {
      margin-bottom: 12px;
      white-space: pre-line;
    }
    .user { text-align: right; color: #00558c; }
    .bot { text-align: left; color: #333; }
    #inputArea {
      display: flex;
      padding: 12px;
      background: #fff;
      border-top: 1px solid #ccc;
    }
    input {
      flex: 1;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-right: 8px;
    }
    button {
      background: #00558c;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 10px 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div id="chatbox">
  <div id="messages">
    <div class="message bot">Hej! Jag 칛r HSB S칬dert칬rns AI-assistent 游뱄 Vad vill du ha hj칛lp med idag?</div>
  </div>
  <div id="inputArea">
    <input type="text" id="userInput" placeholder="Skriv din fr친ga h칛r..." />
    <button onclick="sendMessage()">Skicka</button>
  </div>
</div>

<script>
  async function sendMessage() {
    const input = document.getElementById("userInput");
    const message = input.value.trim();
    if (!message) return;

    addMessage(message, "user");
    input.value = "";

    const response = await getAIResponse(message);
    addMessage(response, "bot");
  }

  function addMessage(text, sender) {
    const messages = document.getElementById("messages");
    const div = document.createElement("div");
    div.className = "message " + sender;
    div.innerText = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
  }

  async function getAIResponse(userInput) {
    const lowerInput = userInput.toLowerCase();

    if (lowerInput.includes("felanm칛lan")) {
      return `Sj칛lvklart! Du kan g칬ra en felanm칛lan direkt via v친r portal:  
游녤 https://hsb.se/sodertorn/kontakt/felanmalan  
Om det g칛ller n친got akut, som en vattenl칛cka eller str칬mavbrott, kan du 칛ven ringa v친r jour: 08-608 68 00.  
Beh칬ver du hj칛lp med att fylla i felanm칛lan?`;
    }

    if (lowerInput.includes("parkering")) {
      return `Bra att du fr친gar! F칬r parkeringsfr친gor rekommenderar jag att du kontaktar din brf-styrelse direkt, eftersom varje f칬rening har olika avtal.  
Du kan ocks친 h칬ra av dig till v친r kundservice s친 hj칛lper vi dig vidare.  
Vill du att jag visar kontaktuppgifterna?`;
    }

    if (lowerInput.includes("kontakt") || lowerInput.includes("mejla")) {
      return `Du kan alltid kontakta v친r kundservice via:  
游 Telefon: 08-608 68 00  
游닎 E-post: info.sodertorn@hsb.se  
Vill du att jag skickar dig vidare till kontaktformul칛ret?`;
    }

    return `Tack f칬r din fr친ga! Jag 칛r inte helt s칛ker p친 svaret just nu, men jag kan hj칛lpa dig att hitta r칛tt.  
Vill du att jag kopplar dig vidare till v친r kundservice eller guidar dig vidare? 游땕`;
  }
</script>

</body>
</html>
