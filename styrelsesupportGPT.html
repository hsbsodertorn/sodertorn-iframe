<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HSB Södertörn Chatt</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    #chatbox {
      width: 100%;
      max-width: 400px;
      height: 600px;
      border: 2px solid #00558c;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
      margin: 20px auto;
    }
    #messages {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      background: #f5f5f5;
    }
    .message {
      margin-bottom: 12px;
      white-space: pre-line;
    }
    .user { text-align: right; color: #00558c; }
    .bot { text-align: left; color: #333; }
    #inputArea {
      display: flex;
      padding: 12px;
      background: #fff;
      border-top: 1px solid #ccc;
    }
    input {
      flex: 1;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-right: 8px;
    }
    button {
      background: #00558c;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 10px 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div id="chatbox">
  <div id="messages">
    <div class="message bot">Hej! Jag är HSB Södertörns AI-assistent 🤖 Vad vill du ha hjälp med idag?</div>
  </div>
  <div id="inputArea">
    <input type="text" id="userInput" placeholder="Skriv din fråga här..." />
    <button onclick="sendMessage()">Skicka</button>
  </div>
</div>

<script>
  async function sendMessage() {
    const input = document.getElementById("userInput");
    const message = input.value.trim();
    if (!message) return;

    addMessage(message, "user");
    input.value = "";

    const response = await getAIResponse(message);
    addMessage(response, "bot");
  }

  function addMessage(text, sender) {
    const messages = document.getElementById("messages");
    const div = document.createElement("div");
    div.className = "message " + sender;
    div.innerText = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
  }

  async function getAIResponse(userInput) {
    const lowerInput = userInput.toLowerCase();

    if (lowerInput.includes("felanmälan")) {
      return `Självklart! Du kan göra en felanmälan direkt via vår portal:  
👉 https://hsb.se/sodertorn/kontakt/felanmalan  
Om det gäller något akut, som en vattenläcka eller strömavbrott, kan du även ringa vår jour: 08-608 68 00.  
Behöver du hjälp med att fylla i felanmälan?`;
    }

    if (lowerInput.includes("parkering")) {
      return `Bra att du frågar! För parkeringsfrågor rekommenderar jag att du kontaktar din brf-styrelse direkt, eftersom varje förening har olika avtal.  
Du kan också höra av dig till vår kundservice så hjälper vi dig vidare.  
Vill du att jag visar kontaktuppgifterna?`;
    }

    if (lowerInput.includes("kontakt") || lowerInput.includes("mejla")) {
      return `Du kan alltid kontakta vår kundservice via:  
📞 Telefon: 08-608 68 00  
📧 E-post: info.sodertorn@hsb.se  
Vill du att jag skickar dig vidare till kontaktformuläret?`;
    }

    return `Tack för din fråga! Jag är inte helt säker på svaret just nu, men jag kan hjälpa dig att hitta rätt.  
Vill du att jag kopplar dig vidare till vår kundservice eller guidar dig vidare? 😊`;
  }
</script>

</body>
</html>
